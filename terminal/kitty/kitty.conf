# vim:fileencoding=utf-8:foldmethod=marker:foldlevel=0

#: Fonts {{{

font_family      JetBrains Mono
font_size 12.0
disable_ligatures never
undercurl_style thick-sparse
text_composition_strategy 3.0 0

#: }}}

#: Text cursor customization {{{

cursor_trail 50
cursor_trail_start_threshold 10

#: }}}

#: Scrollback {{{

scrollback_pager_history_size 5

#: }}}

#: Mouse {{{

show_hyperlink_targets yes

copy_on_select a1
mouse_map middle release ungrabbed paste_from_buffer a1

#: }}}

#: Terminal bell {{{

enable_audio_bell no
window_alert_on_bell yes

#: }}}

#: Window layout {{{

remember_window_size  no
initial_window_width  160c
initial_window_height 40c

enabled_layouts splits,all

window_padding_width 3

inactive_text_alpha 0.75

#: }}}

#: Tab bar {{{

#: }}}

#: Color scheme {{{

#include ./themes/light.conf
include ./themes/dark.conf

#: }}}

#: Advanced {{{

allow_remote_control password
remote_control_password "" get-colors get-text set-colors ls signal-child close-window ./auth_open_launch.py
listen_on unix:/tmp/kitty.sock

# kitty-scrollback.nvim Kitten alias
action_alias kitty_scrollback_nvim kitten ~/.local/share/nvim/lazy/kitty-scrollback.nvim/python/kitty_scrollback_nvim.py
# Browse scrollback buffer in nvim
map ctrl+s>[ kitty_scrollback_nvim
# Browse output of the last shell command in nvim
map ctrl+s>g>o kitty_scrollback_nvim --config ksb_builtin_last_cmd_output
# Show clicked command output in nvim
mouse_map ctrl+shift+right press ungrabbed combine : mouse_select_command_output : kitty_scrollback_nvim --config ksb_builtin_last_visited_cmd_output
# Browse output of the last shell command in pager
map ctrl+s>g>s kitty_scrollback_nvim --config ksb_builtin_last_visited_cmd_output

shell_integration no-sudo

#: }}}

#: OS specific tweaks {{{

macos_option_as_alt yes
macos_quit_when_last_window_closed yes

# macos_thicken_font 0

#: Draw an extra border around the font with the given width, to
#: increase legibility at small font sizes on macOS. For example, a
#: value of 0.75 will result in rendering that looks similar to sub-
#: pixel antialiasing at common font sizes. Note that in modern kitty,
#: this option is obsolete (although still supported). Consider using
#: text_composition_strategy instead.

macos_traditional_fullscreen yes

#: }}}

#: Keyboard shortcuts {{{

# kitty_mod ctrl+shift

clear_all_shortcuts no

#: Clipboard {{{

# map kitty_mod+c copy_to_clipboard
# map cmd+c       copy_to_clipboard
map cmd+shift+c       copy_to_clipboard

# map kitty_mod+v paste_from_clipboard
# map cmd+v       paste_from_clipboard
map cmd+shift+v       paste_from_clipboard

#: }}}

#: Scrolling {{{

#: Scroll line up

# map kitty_mod+up    scroll_line_up
# map kitty_mod+k     scroll_line_up
# map opt+cmd+page_up scroll_line_up
# map cmd+up          scroll_line_up
map kitty_mod+y     scroll_line_up

#: Scroll line down

# map kitty_mod+down    scroll_line_down
# map kitty_mod+j       scroll_line_down
# map opt+cmd+page_down scroll_line_down
# map cmd+down          scroll_line_down
map kitty_mod+e       scroll_line_down

#: Scroll page up

# map kitty_mod+page_up scroll_page_up
# map cmd+page_up       scroll_page_up
map kitty_mod+b       scroll_page_up

#: Scroll page down

# map kitty_mod+page_down scroll_page_down
# map cmd+page_down       scroll_page_down
map kitty_mod+f         scroll_page_down

#: Scroll to top

# map kitty_mod+home scroll_home
# map cmd+home       scroll_home
map ctrl+s>g>g scroll_home

#: Scroll to bottom

# map kitty_mod+end scroll_end
# map cmd+end       scroll_end
map ctrl+s>shift+g scroll_end

#: Scroll to previous shell prompt

# map kitty_mod+z scroll_to_prompt -1
map kitty_mod+[ scroll_to_prompt -1
map ctrl+s>{ scroll_to_prompt -1
# map kitty_mod+x scroll_to_prompt 1
map kitty_mod+] scroll_to_prompt 1
map ctrl+s>} scroll_to_prompt 1

#: }}}

#: Window management {{{

#: New window

map ctrl+s>s       launch --location=hsplit --cwd=current --copy-colors
map ctrl+s>v       launch --location=vsplit --cwd=current --copy-colors
map ctrl+s>ctrl+s  launch --location=hsplit --cwd=current --copy-colors
map ctrl+s>ctrl+v  launch --location=vsplit --cwd=current --copy-colors
map ctrl+s>shift+s launch --location=hsplit --copy-colors
map ctrl+s>shift+v launch --location=vsplit --copy-colors

#: Close window

# map kitty_mod+w close_window
# map shift+cmd+d close_window
map ctrl+s>x close_window
map ctrl+s>ctrl+x close_window

#: Start resizing window

# map kitty_mod+r start_resizing_window
# map cmd+r       start_resizing_window
map ctrl+s>*      start_resizing_window

#: Move window

map ctrl+s>h      neighboring_window left
map ctrl+s>l      neighboring_window right
map ctrl+s>k      neighboring_window up
map ctrl+s>j      neighboring_window down
map ctrl+s>ctrl+h neighboring_window left
map ctrl+s>ctrl+l neighboring_window right
map ctrl+s>ctrl+k neighboring_window up
map ctrl+s>ctrl+j neighboring_window down

#: Visually select and focus window

# map kitty_mod+f7 focus_visible_window
map ctrl+s>w focus_visible_window

#: Visually swap window with another

# map kitty_mod+f8 swap_with_window
map ctrl+s>r swap_with_window

#: }}}

#: Tab management {{{

#: Next tab

# map kitty_mod+right next_tab
# map shift+cmd+]     next_tab
# map ctrl+tab        next_tab
map ctrl+s>n        next_tab
map ctrl+s>ctrl+n   next_tab

#: Previous tab

# map kitty_mod+left previous_tab
# map shift+cmd+[    previous_tab
# map ctrl+shift+tab previous_tab
map ctrl+s>p       previous_tab
map ctrl+s>ctrl+p  previous_tab

#: New tab

# map kitty_mod+t new_tab
# map cmd+t       new_tab
map ctrl+s>t       launch --type=tab --cwd=current --copy-colors
map ctrl+s>ctrl+t  launch --type=tab --cwd=current --copy-colors
map ctrl+s>shift+t launch --type=tab --copy-colors

#: Layout management {{{

# Zoom
map ctrl+s>z toggle_layout stack

#: }}}

#: Font sizes {{{

#: Increase font size

map kitty_mod+equal     change_font_size current +2.0
map kitty_mod+semicolon change_font_size current +2.0
map kitty_mod+kp_add    change_font_size current +2.0
map cmd+plus            change_font_size current +2.0
map cmd+equal           change_font_size current +2.0
map shift+cmd+equal     change_font_size current +2.0

#: Decrease font size

map kitty_mod+minus       change_font_size current -2.0
map kitty_mod+kp_subtract change_font_size current -2.0
map cmd+minus             change_font_size current -2.0
map shift+cmd+minus       change_font_size current -2.0

#: Reset font size

map kitty_mod+0 change_font_size current 0
map cmd+0       change_font_size current 0

#: }}}

#: Select and act on visible text {{{

#: Open

map ctrl+s>o>u open_url_with_hints
map ctrl+s>o>f kitten hints --type path
map ctrl+s>o>l kitten hints --type hyperlink

#: Insert

map ctrl+s>i>f kitten hints --type path --program -
map ctrl+s>i>l kitten hints --type line --program -
map ctrl+s>i>w kitten hints --type word --program -
map ctrl+s>i>h kitten hints --type hash --program -

# map kitty_mod+p>n kitten hints --type linenum

#::  Select something that looks like filename:linenum and open it in
#::  vim at the specified line number.

#: Miscellaneous {{{

#: Open the kitty command shell

map ctrl+s>q>: kitty_shell window

#::  Open the kitty shell in a new window / tab / overlay / os_window
#::  to control kitty using commands.

#: Reset the terminal

map ctrl+s>ctrl+l clear_terminal reset active

#: Debug kitty configuration

# map kitty_mod+f6 debug_config

#::  Show details about exactly what configuration kitty is running
#::  with and its host environment. Useful for debugging issues.

#: }}}

#: }}}

include kitty_${KITTY_OS}.conf
